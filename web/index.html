<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digit Recognition Neural Network</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="hero">
        <div class="hero-content">
            <div>
                <p class="eyebrow">MNIST Playground</p>
                <h1>Real-Time Digit Recognition</h1>
                <p class="lead">
                    A neural network trained from scratch in Java to classify digits 0-9. Draw on the canvas,
                    follow the preprocessing pipeline, and see how the model responds instantly in your browser.
                </p>
            </div>
            <div class="hero-highlights">
                <div>
                    <span class="stat">784 → 256 → 128 → 10</span>
                    <p>Fully-connected architecture using ReLU + Softmax.</p>
                </div>
                <div>
                    <span class="stat">Mini-batch SGD</span>
                    <p>Training with MNIST normalization and loss-based early stop.</p>
                </div>
                <div>
                    <span class="stat">End-to-end</span>
                    <p>Java backend, responsive UI, centralized 28×28 preview.</p>
                </div>
            </div>
        </div>
    </header>

    <main class="page">
        <section class="workspace">
            <div class="canvas-panel">
                <div class="panel-header">
                    <div>
                        <h2>Interactive Canvas</h2>
                        <p>Draw with mouse or touch. The canvas is centered and scaled to 28×28 before inference.</p>
                    </div>
                    <div class="tool-buttons">
                        <button id="penBtn" class="tool-btn active">Pen</button>
                        <button id="eraserBtn" class="tool-btn">Eraser</button>
                    </div>
                </div>
                <div class="canvas-wrapper">
                    <canvas id="drawingCanvas" width="400" height="400"></canvas>
                    <div class="canvas-overlay">
                        <p>Draw here</p>
                    </div>
                </div>
                <div class="actions">
                    <button id="clearBtn" class="action secondary">Clear</button>
                    <button id="predictBtn" class="action primary">Run inference</button>
                </div>
            </div>

            <div class="insights-panel">
                <div class="panel-section">
                    <div class="panel-header compact">
                        <div>
                            <h3>Prediction</h3>
                            <p>Confidence derived from the Softmax output.</p>
                        </div>
                    </div>
                    <div id="result" class="result-card hidden">
                        <div class="prediction">
                            <span class="prediction-value" id="predictionValue">-</span>
                            <p class="prediction-label" id="predictionLabel">Waiting for input...</p>
                        </div>
                        <div class="confidence-block">
                            <div class="confidence-info">
                                <span>Confidence</span>
                                <strong id="confidencePercentage">0%</strong>
                            </div>
                            <div class="confidence-bar">
                                <div class="confidence-fill" id="confidenceFill"></div>
                            </div>
                        </div>
                        <div class="probabilities">
                            <div class="probabilities-header">
                                <h4>Top 5 classes</h4>
                            </div>
                            <ul id="probabilitiesList" class="probabilities-list"></ul>
                        </div>
                    </div>
                </div>

                <div class="panel-section preview-section">
                    <div class="panel-header compact">
                        <div>
                            <h3>28×28 Preview</h3>
                            <p>Exact representation used during training (centered + normalized).</p>
                        </div>
                    </div>
                    <canvas id="previewCanvas" width="200" height="200"></canvas>
                </div>
            </div>
        </section>

        <section class="info-grid">
            <article class="info-card">
                <h4>How it works</h4>
                <p>
                    The drawing is reduced to 28×28, centered using the bounding box, and normalized with mean=0.1307,
                    std=0.3081. The Java backend trains the network with mini-batches of 64 using Softmax +
                    Cross-Entropy, exports the weights to `weights/pesos.csv`, and the frontend loads them for inference.
                </p>
            </article>
            <article class="info-card">
                <h4>Architecture</h4>
                <ul>
                    <li>Input: 784 values (flattened 28×28)</li>
                    <li>Hidden layers: 256 and 128 neurons with ReLU</li>
                    <li>Output: 10 logits + Softmax</li>
                    <li>Training: Mini-batch SGD (LR 0.1) with loss &lt; 0.05 early-stop</li>
                </ul>
            </article>
            <article class="info-card">
                <h4>How to use</h4>
                <ol>
                    <li>Draw a clear, centered digit with good contrast.</li>
                    <li>Click “Run inference” to send the input.</li>
                    <li>Observe the prediction, confidence, and top classes.</li>
                    <li>Use “Clear” to quickly start a new sample.</li>
                </ol>
            </article>
        </section>
    </main>

    <footer class="site-footer">
        <p>Educational neural network implemented from scratch in Java + JavaScript. MNIST © Yann LeCun et al.</p>
    </footer>

    <script src="neural-network.js"></script>
    <script src="app.js"></script>
</body>
</html>

